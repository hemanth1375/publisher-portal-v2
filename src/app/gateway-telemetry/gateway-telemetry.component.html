<div class="container">
    <form [formGroup]="TelemertyFormGroup">
        <div class="row">
            <h3>Telemetry </h3>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <mat-accordion>
                    <mat-expansion-panel (opened)="TelemertyFormGroup.value.isLoggingActive">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <div class="d-flex justify-content-between toggle-header">
                                    <div>Logging &nbsp; <i class="bi bi-info-circle" [matTooltip]=loggingToolTip></i>
                                    </div>
                                    <!-- <mat-slide-toggle formControlName="isLoggingActive"></mat-slide-toggle> -->
                                    <!-- <div class="form-check form-switch">
                                        <input class="form-check-input custom-switch" type="checkbox" role="switch"
                                            formControlName="isLoggingActive" id="flexSwitchCheckDefault">
                                    </div> -->
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                                            formControlName="isLoggingActive">
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <!-- @if(!TelemertyFormGroup.value.isLoggingActive){
                        <p>Extend the default logging behaviour</p>
                        } -->
                        @if (TelemertyFormGroup.value.isLoggingActive) {
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="level" class="form-label">Level &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=levelToolTip></i></label>
                                <select class="form-select" aria-label="Default select example"
                                    formControlName="logginngLevel" id="level">
                                    <option value="DEBUG">DEBUG</option>
                                    <option value="WARNING">WARNING</option>
                                    <option value="INFO">INFO</option>
                                    <option value="CRITICAL">CRITICAL</option>
                                </select>
                                <!-- <div class="form-text">The reporting level, from more to less verbosity
                                </div> -->
                            </div>
                            <div class="col-sm-4">
                                <label for="logprefix" class="form-label">Logging Prefix &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=logprefixToolTip></i></label>
                                <input type="text" id="logprefix" class="form-control"
                                    aria-describedby="passwordHelpBlock" formControlName="loggingPrefix">
                                <!-- <div id="levelHelpBlock" class="form-text">
                                    Prepend a string before the the log lines
                                </div> -->
                            </div>

                        </div>

                        <div class="row">
                            <div class="col-sm-4">
                                <mat-checkbox class="example-margin" formControlName="enableLogstash">Enable
                                    Logstash</mat-checkbox>
                            </div>
                            <div class="col-sm-4">
                                <label for="opType" class="form-label">Message Format &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=opTypeToolTip></i></label>
                                <select class="form-select" aria-label="Default select example"
                                    formControlName="logMsgFormat">
                                    <option value="default">Default</option>
                                    <option value="logstash">Logstash</option>
                                    <option value="custom">Custom</option>
                                </select>
                                <!-- <div class="form-text">The format of the log record
                                </div> -->
                            </div>

                        </div>

                        <div class="col-sm-12">
                            <h4>
                                Sends Logs to..
                            </h4>
                        </div>

                        <div class="row">
                            <div class="col-sm-4">
                                <mat-checkbox class="example-margin" formControlName="logSysLog">Syslog-Remote or
                                    local server</mat-checkbox>
                            </div>
                            <div class="col-sm-4">
                                <mat-checkbox class="example-margin"
                                    formControlName="logStdOut">Stdout-Console</mat-checkbox>
                            </div>
                        </div>

                        @if (TelemertyFormGroup.value.logSysLog) {
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="opType" class="form-label">Syslog Facility &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=syslogFacilityToolTip></i></label>
                                <select class="form-select" aria-label="Default select example"
                                    formControlName="logSysLogFacility">
                                    <option value="local1">Local 1</option>
                                    <option value="local2">Local 2</option>
                                    <option value="local3">Local 3</option>
                                    <option value="local4">Local 4</option>
                                    <option value="local5">Local 5</option>
                                    <option value="local6">Local 6</option>
                                    <option value="local7">Local 7</option>
                                    <option value="local8">Local 8</option>
                                    <option value="local9">Local 9</option>
                                </select>
                                <!-- <div class="form-text">Facility to send the messages as set in the rsyslog standard
                                </div> -->
                            </div>
                        </div>
                        }
                        }
                        @if (TelemertyFormGroup.value.isLoggingActive) {
                        <div class="row gap-3">
                            <div class="col-sm-12 heading-with-toggle d-flex align-items-center gap-2">
                                <div>
                                    <h3>GELF</h3>
                                </div>
                                <!-- <mat-slide-toggle formControlName="isGelfActive"></mat-slide-toggle> -->
                                <!-- <div> -->
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                                        formControlName="isGelfActive">
                                </div>
                                <!-- </div> -->
                            </div>

                            @if (TelemertyFormGroup.value.isGelfActive) {
                            <div class="row">
                                <div class="col-sm-4">
                                    <label for="GELFAdd" class="form-label">Address &nbsp; <i class="bi bi-info-circle"
                                            [matTooltip]=gelfAddToolTip></i></label>
                                    <input type="text" id="GELFAdd" class="form-control" aria-describedby="AddHelpBlock"
                                        formControlName="GELFAdrress">
                                    <!-- <div id="AddHelpBlock" class="form-text">
                                        The address (including the port) of your graylog server (or any service that
                                        receives gelf
                                        inputs).
                                    </div> -->
                                </div>
                                <div class="col-sm-4">
                                    <mat-checkbox class="example-margin" formControlName="enableTCP">Enable
                                        TCP &nbsp; <i class="bi bi-info-circle"
                                            [matTooltip]=enableTCPToolTip></i></mat-checkbox>
                                    <!-- <div class="form-text">By default uses UDP but you can enable TCP by setting this
                                        option to true
                                        (not recommended, your performance might suffer).
                                    </div> -->
                                </div>
                            </div>
                            }@else {
                            <p>Writes logs using GELF (Graylog Extended Log Format)</p>

                            }
                        </div>
                        }

                    </mat-expansion-panel>

                    <mat-expansion-panel (opened)="TelemertyFormGroup.value.isOpenTelActive">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <div class="d-flex justify-content-between toggle-header">
                                    <div>OpenTelemetry &nbsp; <i class="bi bi-info-circle"
                                            [matTooltip]=openTelementryToolTip></i></div>
                                    <!-- <mat-slide-toggle formControlName="isOpenTelActive"></mat-slide-toggle> -->
                                    <!-- <div class="form-check form-switch">
                                        <input class="form-check-input custom-switch" type="checkbox" role="switch"
                                            formControlName="isOpenTelActive" id="flexSwitchCheckDefault">
                                    </div> -->
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                                            formControlName="isOpenTelActive">
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <!-- @if(!TelemertyFormGroup.value.isOpenTelActive){
                        <p>The OpenTelemetry middleware provides several integrations to export tracing and metrics to
                            different third party systems.</p>
                        } -->
                        @if (TelemertyFormGroup.value.isOpenTelActive) {
                        <div class="row gap-2">
                            <div class="col-sm-4">
                                <label for="sampleRate" class="form-label">Tracing sample rate &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=sampleRateToolTip></i></label>
                                <input type="number" id="sampleRate" class="form-control"
                                    aria-describedby="sampleRateHelpBlock" formControlName="OTsampleRate">
                                <!-- <div id="sampleRateHelpBlock" class="form-text">
                                    Percentage of traces you want to sample (decimal between 0 and 1).
                                </div> -->
                            </div>
                            <div class="col-sm-4">
                                <label for="reportingPeriod" class="form-label">Reporting period &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=reportingPeriodToolTip></i></label>
                                <input type="number" id="reportingPeriod" class="form-control"
                                    aria-describedby="reportingPeriodHelpBlock" formControlName="OTreportingPeriod">
                                <!-- <div id="reportingPeriodHelpBlock" class="form-text">
                                    Time between sent reports to the backend
                                </div> -->
                            </div>
                        </div>

                        <div class="row gap-2">
                            <div class="col-sm-3">
                                <button type="button" class="btn  btn-dark btn-sm" (click)="addOtlpConfig()">Add
                                    OTLP</button>
                            </div>
                            <div class="col-sm-3">
                                <button type="button" class="btn btn-dark btn-sm" (click)="addPromethusConfig()">Add
                                    Promethus</button>
                            </div>

                        </div>

                        <div class="row" formArrayName="otlp">
                            <div class="row align-items-center gap-2"
                                *ngFor="let config of otlpArray.controls; let i = index" [formGroupName]="i">
                                <div class="col-sm-4">
                                    <label for="otlpName" class="form-label">Name &nbsp; <i class="bi bi-info-circle"
                                            [matTooltip]=otlpNameToolTip></i></label>
                                    <input type="text" id="otlpName" class="form-control"
                                        aria-describedby="otlpNameHelpBlock" placeholder="otlp_exporter"
                                        formControlName="name">
                                    <!-- <div id="otlpNameHelpBlock" class="form-text">
                                        Prepend a string before the the log lines
                                    </div> -->
                                </div>
                                <div class="col-sm-4">
                                    <mat-checkbox class="example-margin" formControlName="use_http">Use
                                        HTTP &nbsp; <i class="bi bi-info-circle"
                                            [matTooltip]=useHttpToolTip></i></mat-checkbox>
                                    <!-- <div class="form-text">Check when the collector uses HTTP instead of gRPC
                                    </div> -->
                                </div>

                                <div class="col-sm-4">
                                    <label for="hostName" class="form-label">HostName &nbsp; <i
                                            class="bi bi-info-circle" [matTooltip]=hostNameToolTip></i></label>
                                    <input type="text" id="hostName" class="form-control"
                                        aria-describedby="hostNameHelpBlock" placeholder="otlp.yourprovider.net"
                                        formControlName="host">
                                    <div id="hostNameHelpBlock" class="form-text">
                                        The host where you want to push the data
                                    </div>
                                </div>

                                <div class="col-sm-4">
                                    <label for="otlpPort" class="form-label">Port &nbsp; <i class="bi bi-info-circle"
                                            [matTooltip]=otlpPortToolTip></i></label>
                                    <input type="number" id="otlpPort" class="form-control"
                                        aria-describedby="otlpPortHelpBlock" formControlName="port" placeholder="4317">
                                    <!-- <div id="otlpPortHelpBlock" class="form-text">
                                        The port where the collector listens
                                    </div> -->
                                </div>
                                <div class="col-sm-4">
                                    <button type="button" class="btn btn-dark btn-sm"
                                        (click)="removeOtlpConfig(i)">Remove
                                        OTLP</button>
                                </div>
                            </div>
                        </div>

                        <div class="row" formArrayName="prometheus">
                            <div class="row align-items-center gap-2"
                                *ngFor="let config of prometheusArray.controls; let i = index" [formGroupName]="i">
                                <div class="col-sm-4">
                                    <label for="prometheusName" class="form-label">Name &nbsp; <i
                                            class="bi bi-info-circle" [matTooltip]=prometheusNameToolTip></i></label>
                                    <input type="text" id="prometheusName" class="form-control"
                                        aria-describedby="prometheusNameHelpBlock" placeholder="otlp_exporter"
                                        formControlName="promethusName">
                                    <!-- <div id="prometheusNameHelpBlock" class="form-text">
                                        A unique name to identify this exporter.
                                    </div> -->
                                </div>

                                <div class="col-sm-4">
                                    <label for="prometheusPort" class="form-label">Port &nbsp; <i
                                            class="bi bi-info-circle" [matTooltip]=prometheusPortToolTip></i></label>
                                    <input type="number" id="prometheusPort" class="form-control"
                                        aria-describedby="prometheusPortHelpBlock" formControlName="promethusPort"
                                        placeholder="9090">
                                    <!-- <div id="prometheusPortHelpBlock" class="form-text">
                                        The port in KrakenD where Prometheus will connect to
                                    </div> -->
                                </div>

                                <div class="col-sm-4">
                                    <button type="button" class="btn btn-dark btn-sm"
                                        (click)="removePromethusConfig(i)">Remove
                                        OTLP</button>
                                </div>
                            </div>
                        </div>
                        }

                    </mat-expansion-panel>

                    <mat-expansion-panel (opened)="TelemertyFormGroup.value.isMetricsAPiActive">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <div class="d-flex justify-content-between toggle-header">
                                    <div>Metrics API &nbsp; <i class="bi bi-info-circle"
                                            [matTooltip]=metricsApiToolTip></i></div>
                                    <div>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                                                formControlName="isMetricsAPiActive">
                                        </div>
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        @if (TelemertyFormGroup.value.isMetricsAPiActive) {
                        <div class="row">
                            <div class="col-sm-3">
                                <mat-checkbox class="example-margin" formControlName="metricsDisableEndpoint">Disable
                                    Endpoint &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=metricsDisableEndpointToolTip></i></mat-checkbox>
                                <!-- <div class="form-text">Metrics won't be published but still collected (can be sent to
                                    InfluxDB).
                                </div> -->
                            </div>
                            <div class="col-sm-3">
                                <mat-checkbox class="example-margin" formControlName="metricsDisableProxy">Disable
                                    Proxy &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=metricsDisableProxyToolTip></i></mat-checkbox>
                                <!-- <div class="form-text">Skip any metrics happening in the proxy layer
                                </div> -->
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <mat-checkbox class="example-margin" formControlName="metricsDisableRouter">Disable
                                    Router &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=metricsDisableRouterToolTip></i></mat-checkbox>
                                <!-- <div class="form-text">Skip any metrics happening in the router layer
                                </div> -->
                            </div>
                            <div class="col-sm-3">
                                <mat-checkbox class="example-margin" formControlName="metricsDisableBackend">Disable
                                    Backend Layer Metrics &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=metricsDisableBackendToolTip></i></mat-checkbox>
                                <!-- <div class="form-text">Skip any metrics when interacting with backends
                                </div> -->
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-5">
                                <label for="listenAdd" class="form-label">Listen Address &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=listenAddToolTip></i></label>
                                <input type="text" id="listenAdd" class="form-control"
                                    aria-describedby="listenAddHelpBlock" placeholder=":8090"
                                    formControlName="metricsListenAddress">
                                <!-- <div id="listenAddHelpBlock" class="form-text">Change the listen address where the
                                    metrics
                                    endpoint will be exposed. Defaults to :8090.
                                </div> -->
                            </div>
                            <div class="col-sm-5">
                                <label for="collecTime" class="form-label">Collection Time &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=collecTimeToolTip></i></label>
                                <input type="text" id="collecTime" class="form-control"
                                    aria-describedby="collecTimeHelpBlock" placeholder="60s"
                                    formControlName="metricCollecTime"
                                    [class.is-invalid]="TelemertyFormGroup.get('metricCollecTime')?.invalid && TelemertyFormGroup.get('metricCollecTime')?.touched">
                                <div class="invalid-feedback"
                                    *ngIf="TelemertyFormGroup.get('metricCollecTime')?.errors?.['pattern'] && TelemertyFormGroup.get('metricCollecTime')?.touched">
                                    Please enter a valid cache TTL (e.g., `10ms`, `5s`, `1h`).
                                </div>
                                <!-- <div id="collecTimeHelpBlock" class="form-text">
                                    Prepend a string before the the log lines
                                </div> -->
                            </div>
                        </div>
                        }
                        <!-- @else {
                        <p>The metrics API listens in a new address and exposes a /__stats/ endpoint with all the
                            KrakenD
                            metrics.</p>
                        } -->
                    </mat-expansion-panel>

                    <mat-expansion-panel (opened)="TelemertyFormGroup.value.openCensusActive">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <div class="d-flex justify-content-between toggle-header">
                                    <div>
                                        Opencensus &nbsp; <i class="bi bi-info-circle"
                                            [matTooltip]=opencensusToolTip></i>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                                            formControlName="openCensusActive">
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        @if (TelemertyFormGroup.value.openCensusActive) {
                        <div class="row">
                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin"
                                        formControlName="loggerActive">Logger</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p>Will use your Logger settings to expose the metrics</p>
                                </div>
                            </div>
                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin"
                                        formControlName="zipkinActive">Zipkin</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p>Distributed tracing system</p>
                                </div>
                            </div>
                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin"
                                        formControlName="jaegerActive">Jaeger</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p>Distributed tracing system</p>
                                </div>
                            </div>
                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin"
                                        formControlName="influxDBActive">InfluxDB</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p>Time series database</p>
                                </div>
                            </div>
                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin"
                                        formControlName="prometheusActive">Prometheus</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p>Monitoring and alerting toolkit</p>
                                </div>
                            </div>
                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin" formControlName="awsActice">AWS
                                        X-Ray</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p>Analyze and debug production, distributed applications</p>
                                </div>
                            </div>

                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin" formControlName="googleStkActive">Google
                                        Stackdriver</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p> Logs, metrics, traces, and other signals</p>
                                </div>
                            </div>
                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin"
                                        formControlName="datadogActive">Datadog</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p>Stats and Tracing</p>
                                </div>
                            </div>
                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin" formControlName="newRelicActive">New
                                        Relic</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p>Metrics and Traces</p>
                                </div>
                            </div>
                            <div class="col-sm-12 d-flex align-items-center gap-1">
                                <div>
                                    <mat-checkbox class="example-margin"
                                        formControlName="openCensusAgentActive">OpenCensus
                                        Agent</mat-checkbox>
                                </div>
                                <div class="chck_fture_text">
                                    <p>Use ocagent protocol (Azure Monitor, Jaeger, Prometheus, OpenCensus)</p>
                                </div>
                            </div>

                        </div>

                        <div class="col-sm-12">
                            <h4>Global setting for all metrics</h4>
                        </div>
                        <div class="row">
                            <div class="col-sm-5">
                                <label for="sampleRate" class="form-label">Sample Rate &nbsp; <i
                                        class="bi bi-info-circle"
                                        [matTooltip]=globalSettingSampleRateToolTip></i></label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="sampleRate"
                                        aria-describedby="basic-addon3 basic-addon4" formControlName="OCsampleRate"
                                        placeholder="100">
                                    <span class="input-group-text" id="basic-addon3">%</span>
                                </div>
                                <!-- <div class="form-text" id="basic-addon4">Percentage of requests you want to sample
                                    (0-100).
                                </div> -->
                            </div>
                            <div class="col-sm-5">
                                <label for="basic-url" class="form-label">Reporting Period &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=OCreportingPeriodToolTip></i></label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="basic-url"
                                        aria-describedby="basic-addon3 basic-addon4" formControlName="OCreportingPeriod"
                                        placeholder="1">
                                    <span class="input-group-text" id="basic-addon3">seconds</span>
                                </div>
                                <!-- <div class="form-text" id="basic-addon4">Time between sent reports to the backend</div> -->
                            </div>
                        </div>

                        @if (TelemertyFormGroup.value.loggerActive) {
                        <div class="row">
                            <hr>
                            <h4>Logger</h4>
                            <p>Sending metrics to the logger do not require any additional configuration. Metrics will
                                be
                                displayed as per the Logging configuration</p>
                        </div>
                        }

                        @if (TelemertyFormGroup.value.zipkinActive) {
                        <div class="row">
                            <hr>
                            <div class="col-sm-12">
                                <h4>Zipkin Configuration</h4>
                            </div>
                            <div class="col-sm-4">
                                <label for="collectorURL" class="form-label">Collector URL </label>
                                <input type="text" id="collectorURL" class="form-control"
                                    placeholder="e.g:http://192.168.99.100.." formControlName="zipkincollectorURL">
                            </div>
                            <div class="col-sm-4">
                                <label for="zServiceName" class="form-label">Service Name</label>
                                <input type="text" id="zServiceName" class="form-control" placeholder="e.g:KrakenD"
                                    formControlName="zipkinServiceName">
                            </div>
                        </div>
                        }
                        @if (TelemertyFormGroup.value.jaegerActive) {
                        <div class="row">
                            <hr>
                            <div class="col-sm-12">
                                <h4>Jeager Configuration</h4>
                            </div>

                            <div class="col-sm-4">
                                <label for="jEndpoint" class="form-label">Endpoint</label>
                                <input type="text" id="jEndpoint" class="form-control" placeholder="otlp_exporter"
                                    formControlName="jeagerEndpoint">
                            </div>
                            <div class="col-sm-4">
                                <label for="jService" class="form-label">Service Name</label>
                                <input type="text" id="jService" class="form-control" placeholder="otlp_exporter"
                                    formControlName="jeagerServiceName">
                            </div>
                        </div>
                        }
                        @if (TelemertyFormGroup.value.influxDBActive) {
                        <hr>
                        <div class="col-sm-12">
                            <h4>InfluxDB Configuration</h4>
                        </div>
                        <div class="col-sm-8">
                            <label for="influxAdd" class="form-label">Address</label>
                            <input type="text" id="influxAdd" class="form-control"
                                placeholder="e.g:http://192.168.99.100:8086" formControlName="influxDBaddress">
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="influxDB" class="form-label">Database</label>
                                <input type="text" id="influxDB" class="form-control" placeholder="otlp_exporter"
                                    formControlName="infulxDBdatabase">
                            </div>
                            <div class="col-sm-4">
                                <label for="influxTimeout" class="form-label">Write Timeout</label>
                                <input type="text" id="influxTimeout" class="form-control" placeholder="otlp_exporter"
                                    formControlName="influxwriteTimeout"
                                    [class.is-invalid]="TelemertyFormGroup.get('influxwriteTimeout')?.invalid && TelemertyFormGroup.get('influxwriteTimeout')?.touched">
                                <div class="invalid-feedback"
                                    *ngIf="TelemertyFormGroup.get('influxwriteTimeout')?.errors?.['pattern'] && TelemertyFormGroup.get('influxwriteTimeout')?.touched">
                                    Please enter a valid cache TTL (e.g., `10ms`, `5s`, `1h`).
                                </div>
                            </div>
                        </div>
                        }
                        @if (TelemertyFormGroup.value.prometheusActive) {
                        <div class="row">
                            <hr>
                            <div class="col-sm-12">
                                <h4>Prometheus Configuration</h4>
                            </div>
                            <div class="col-sm-4">
                                <label for="promPort" class="form-label">Port</label>
                                <input type="number" id="promPort" class="form-control" placeholder="e.g:9091"
                                    formControlName="prometheusPort">
                            </div>
                        </div>
                        }

                        @if (TelemertyFormGroup.value.awsActice) {
                        <div class="row">
                            <hr>
                            <div class="col-sm-12">
                                <h4>AWS X-Ray Configuration</h4>
                            </div>

                            <div class="row">
                                <div class="col-sm-5">
                                    <label for="awsReg" class="form-label">Region</label>
                                    <input type="number" id="awsReg" class="form-control"
                                        aria-describedby="passwordHelpBlock" placeholder="e.g:eu-west-1"
                                        formControlName="awsRegion">
                                </div>
                                <div class="col-sm-5">
                                    <label for="awsServ" class="form-label">Your service version</label>
                                    <input type="number" id="awsServ" class="form-control"
                                        aria-describedby="passwordHelpBlock" placeholder="e.g:1.2.3"
                                        formControlName="awsService">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <mat-checkbox class="example-margin" formControlName="useCredFromEnvActice">Use
                                        Credentials
                                        from
                                        ENV</mat-checkbox>
                                </div>
                                @if (TelemertyFormGroup.value.useCredFromEnvActice) {
                                <div class="col-sm-5">
                                    <label for="logprefix" class="form-label">AWS Access Key</label>
                                    <input type="number" id="logprefix" class="form-control"
                                        aria-describedby="passwordHelpBlock" placeholder="e.g:1.2.3"
                                        formControlName="awsAccessKey">
                                </div>
                                <div class="col-sm-5">
                                    <label for="logprefix" class="form-label">AWS Secret Key</label>
                                    <input type="number" id="logprefix" class="form-control"
                                        aria-describedby="passwordHelpBlock" placeholder="e.g:1.2.3"
                                        formControlName="awsSecretKey">
                                </div>
                                }
                            </div>
                        </div>
                        }

                        @if (TelemertyFormGroup.value.googleStkActive) {
                        <div class="row">
                            <hr>
                            <div class="col-sm-12">
                                <h4>Stackdriver Configuration</h4>
                            </div>
                            <div class="row">
                                <div class="col-sm-5">
                                    <label for="projID" class="form-label">Project ID</label>
                                    <input type="text" id="projID" class="form-control"
                                        placeholder="Your GCE project ID" formControlName="stkProjectID">
                                </div>
                                <div class="col-sm-5">
                                    <label for="prefix" class="form-label">Metrics Prefix</label>
                                    <input type="text" id="prefix" class="form-control" placeholder="Krackend"
                                        formControlName="stkMetricsPrefix">
                                </div>
                            </div>

                            <div class="col-sm-12">
                                <h4>Labels &nbsp; <i class="bi bi-info-circle" [matTooltip]=labelNameToolTip></i></h4>
                            </div>

                            <div class="row">
                                <div class="col-sm-4">
                                    <input type="text" id="labName" class="form-control"
                                        aria-describedby="passwordHelpBlock" formControlName="labelName"
                                        placeholder="label-name">
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" id="labvalue" class="form-control"
                                        aria-describedby="passwordHelpBlock" formControlName="labelValue"
                                        placeholder="Value">
                                </div>
                                <div class="col-sm-2">
                                    <button type="button" class="btn btn-dark"
                                        (click)="addParameter('label')">Add</button>
                                </div>
                            </div>

                            <!-- <div class="col-sm-12">
                                <p>Enter here any label that will be assigned by default to the reported metric so you
                                    can
                                    filter later on Stack Driver.</p>
                            </div> -->
                            <div class=" col-sm-12 mt-3 d-flex">
                                <button *ngFor="let attr of objectMap | keyvalue" class="parameter-item">
                                    {{ attr.key }} -> {{attr.value}}<mat-icon
                                        (click)="removeParameter(attr.key ,'label')"
                                        class="d-flex align-items-center justify-content-end">close</mat-icon>
                                </button>
                            </div>
                        </div>
                        }

                        @if (TelemertyFormGroup.value.datadogActive) {

                        <hr>
                        <h4>Datadog Configuration</h4>
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="datadogname" class="form-label">NameSpace &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=nameSpaceToolTip></i></label>
                                <input type="text" id="datadogname" class="form-control"
                                    aria-describedby="datadognameHelpBlock" formControlName="datadogNamespace"
                                    placeholder="krackendNS">
                                <!-- <div id="datadognameHelpBlock" class="form-text">
                                    Namespace specifies the namespaces to which metric keys are appended
                                </div> -->
                            </div>
                            <div class="col-sm-4">
                                <label for="datadogService" class="form-label">Service &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=serviceToolTip></i></label>
                                <input type="text" id="datadogService" class="form-control"
                                    aria-describedby="datadogServiceHelpBlock" formControlName="datadogService"
                                    placeholder="KrackendSRVC">
                                <!-- <div id="datadogServiceHelpBlock" class="form-text">
                                    Service specifies the service name used for tracing.
                                </div> -->
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="datadogTrace" class="form-label">Trace Address &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=traceAddressToolTip></i></label>
                                <input type="text" id="datadogTrace" class="form-control"
                                    aria-describedby="datadogTraceHelpBlock" formControlName="datadogTraceAdd"
                                    placeholder="localhost:8126">
                                <!-- <div id="datadogTraceHelpBlock" class="form-text">
                                    The host[:port] address of the Datadog Trace Agent. It defaults to localhost:8126
                                </div> -->
                            </div>
                            <div class="col-sm-4">
                                <label for="datadogSts" class="form-label">Stats Address &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=statsAddressToolTip></i></label>
                                <input type="text" id="datadogSts" class="form-control"
                                    aria-describedby="datadogStsHelpBlock" formControlName="datadogStatusAdd"
                                    placeholder="4317">
                                <!-- <div id="datadogStsHelpBlock" class="form-text">
                                    The port where the collector listens
                                </div> -->
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-4">
                                <label for="datadogTags" class="form-label">Tags &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=tagsToolTip></i></label>
                                <div class="input-group mb-3">
                                    <input type="text" id="datadogTags" class="form-control" placeholder="Tag"
                                        aria-label="Recipient's username" aria-describedby="button-addon2"
                                        formControlName="datadogTag">
                                    <button class="btn btn-outline-secondary" type="button" id="button-addon2"
                                        (click)="addParameter('datadogTag')">Add</button>
                                </div>
                                <!-- <div id="passwordHelpBlock" class="form-text">
                                    Set of global tags to attach to each metric
                                </div> -->
                                <div class="mt-3 d-flex">
                                    <button *ngFor="let attr of tagsArray; let i = index" class="parameter-item">
                                        {{ attr }}<mat-icon (click)="removeParameter(i,'datadogTag')"
                                            class="d-flex align-items-center justify-content-end">close</mat-icon>
                                    </button>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label for="datadogGlobalTags" class="form-label">Global Tags &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=globalTagsToolTip></i> </label>
                                <div class="input-group mb-3">
                                    <input type="text" id="datadogGlobalTags" class="form-control" placeholder="Tag"
                                        aria-label="Recipient's username" aria-describedby="button-addon2"
                                        formControlName="globalTag">
                                    <button class="btn btn-outline-secondary" type="button" id="button-addon2"
                                        (click)="addParameter('globalTag')">Add</button>
                                </div>
                                <!-- <div id="passwordHelpBlock" class="form-text">
                                    Set of tags applied to all exported spans
                                </div> -->
                                <div class="mt-3 d-flex">
                                    <button *ngFor="let attr of globalTagsArray; let i = index" class="parameter-item">
                                        {{ attr }}<mat-icon (click)="removeParameter(i,'globalTag')"
                                            class="d-flex align-items-center justify-content-end">close</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12">
                                <mat-checkbox class="example-margin" formControlName="countPerBuckets">Enable
                                    Logstash &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=countPerBucketsToolTip></i></mat-checkbox>
                            </div>
                            <!-- <div class="col-sm-12">
                                <p>Specifies whether to emit count_per_bucket metrics</p>
                            </div> -->
                        </div>

                        }

                        @if (TelemertyFormGroup.value.newRelicActive) {
                        <hr>
                        <h4>New Relic Configuration</h4>
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="nrService" class="form-label">Service Name &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=relicServiceNameToolTip></i></label>
                                <input type="text" id="nrService" class="form-control"
                                    aria-describedby="nrServiceHelpBlock" formControlName="relicServiceName"
                                    placeholder="Krackend-api-gateway">
                                <!-- <div id="nrServiceHelpBlock" class="form-text">
                                    The service name as shown in the New Relic dashboard
                                </div> -->
                            </div>
                            <div class="col-sm-4">
                                <label for="nrAPIKey" class="form-label">API Key &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=relicApiKeyToolTip></i></label>
                                <input type="text" id="nrAPIKey" class="form-control"
                                    aria-describedby="nrAPIKeyHelpBlock" formControlName="relicApiKey"
                                    placeholder="e.g:NRAK-CH1YWVVWV">
                                <!-- <div id="nrAPIKeyHelpBlock" class="form-text">
                                    The API key provided by New Relic to push data into your account
                                </div> -->
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="opType" class="form-label">Spans URL &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=relicSpansURLToolTip></i> </label>
                                <select class="form-select" aria-label="Default select example"
                                    formControlName="relicSpansURL">
                                    <option selected>Open this select menu</option>
                                    <option value="https://trace-api.newrelic.com/trace/v1">US</option>
                                    <option value="https://trace-api.eu.newrelic.com/trace/v1">EU</option>
                                </select>
                                <!-- <div class="form-text">New Relic might use different endpoints to report traces from its
                                     customers depending on the location of their accounts
                                </div> -->
                            </div>
                            <div class="col-sm-4">
                                <label for="opType" class="form-label">Metrics URL &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=relicMetricsURLToolTip></i></label>
                                <select class="form-select" aria-label="Default select example"
                                    formControlName="relicMetricsURL">
                                    <option selected>Open this select menu</option>
                                    <option value="https://trace-api.newrelic.com/trace/v1">US</option>
                                    <option value="https://trace-api.eu.newrelic.com/trace/v1">EU</option>
                                </select>
                                <!-- <div class="form-text">New Relic might use different endpoints to report metrics from
                                    its
                                    customers depending on the location of their accounts
                                </div> -->
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <mat-checkbox class="example-margin" formControlName="relicsDebug">
                                    Debug &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=relicsDebugToolTip></i></mat-checkbox>
                            </div>
                            <!-- <div class="col-sm-12">
                                <p>Set to true when setting New Relic for the first time, and you want to see the logs
                                    of the
                                    exporter activity. Remove in production.</p>
                            </div> -->
                        </div>
                        }

                        @if (TelemertyFormGroup.value.openCensusAgentActive) {

                        <hr>
                        <h4>Ocagent configuration</h4>
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="ocagentAdd" class="form-label">Collectors Address</label>
                                <input type="text" id="ocagentAdd" class="form-control" placeholder="localhost:55678"
                                    formControlName="ocagentCollectorsAddress">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="ocagentService" class="form-label">Service Name</label>
                                <input type="text" id="ocagentService" class="form-control"
                                    placeholder="krakend/mygateway" formControlName="ocagentServiceName">
                            </div>
                            <div class="col-sm-4">
                                <label for="reconTime" class="form-label">Reconnection Time </label>
                                <input type="text" id="reconTime" class="form-control"
                                    formControlName="ocagentReconTime"
                                    [class.is-invalid]="TelemertyFormGroup.get('ocagentReconTime')?.invalid && TelemertyFormGroup.get('ocagentReconTime')?.touched">
                                <div class="invalid-feedback"
                                    *ngIf="TelemertyFormGroup.get('ocagentReconTime')?.errors?.['pattern'] && TelemertyFormGroup.get('ocagentReconTime')?.touched">
                                    Please enter a valid cache TTL (e.g., `10ms`, `5s`, `1h`).
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <mat-checkbox class="example-margin" formControlName="ocagentInsecure">Insecure (don't
                                    use
                                    SSL)</mat-checkbox>
                            </div>
                            <div class="col-sm-4">
                                <mat-checkbox class="example-margin" formControlName="ocagentEnableCompression">Enable
                                    compression</mat-checkbox>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <h4>Headers &nbsp; <i class="bi bi-info-circle" [matTooltip]=headerKeyToolTip></i></h4>
                            </div>
                            <div class="col-sm-4">
                                <input type="text" id="logprefix" class="form-control"
                                    aria-describedby="passwordHelpBlock" formControlName="headerKey">
                                <!-- <div class="form-text">Sent headers with its values.</div> -->
                            </div>
                            <div class="col-sm-4">
                                <input type="text" id="logprefix" class="form-control"
                                    aria-describedby="passwordHelpBlock" formControlName="headerValue">
                            </div>
                            <div class="col-sm-4">
                                <button type="button" class="btn btn-dark" (click)="addParameter('header')">Add</button>
                            </div>
                            <div class=" col-sm-12 mt-3 d-flex">
                                <button *ngFor="let attr of headerObjectMap | keyvalue" class="parameter-item">
                                    {{ attr.key }} -> {{attr.value}}<mat-icon
                                        (click)="removeParameter(attr.key ,'header')"
                                        class="d-flex align-items-center justify-content-end">close</mat-icon>
                                </button>
                            </div>
                        </div>

                        }

                        }
                        <!-- @else {
                        <p>The metrics API listens in a new address and exposes a /__stats/ endpoint with all the
                            KrakenD
                            metrics.</p>
                        } -->
                    </mat-expansion-panel>

                    <mat-expansion-panel (opened)="TelemertyFormGroup.value.newRelicNativeSDKActive">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <div class="d-flex justify-content-between toggle-header">
                                    <div>
                                        New Relic(Native SDK) &nbsp; <i class="bi bi-info-circle"
                                            [matTooltip]=newRelicToolTip></i>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                                            formControlName="newRelicNativeSDKActive">
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <!-- @if(!TelemertyFormGroup.value.newRelicNativeSDKActive){
                        <p>Push KrakenD metrics and distributed traces to your New Relic dashboard.</p>
                        } -->
                        @if (TelemertyFormGroup.value.newRelicNativeSDKActive) {
                        <div class="row">
                            <div class="col-sm-4">
                                <label for="logprefix" class="form-label">License &nbsp; <i class="bi bi-info-circle"
                                        [matTooltip]=newRelicNativeLogprefixSDKActiveToolTip></i></label>
                                <input type="text" id="logprefix" class="form-control"
                                    aria-describedby="passwordHelpBlock" formControlName="newRelicLicense"
                                    placeholder="XXXX">
                                <!-- <div id="levelHelpBlock" class="form-text">
                                    The API key provided by New Relic to push data into your account.
                                </div> -->
                            </div>
                            <div class="col-sm-4">
                                <mat-checkbox class="example-margin" formControlName="newRelicSDKDebug">Debug &nbsp; <i
                                        class="bi bi-info-circle"
                                        [matTooltip]=newRelicSDKDebugToolTip></i></mat-checkbox>
                                <!-- <div class="form-text">Set to true when configuring New Relic for the first time while
                                    in
                                    development, to see the activity in the logs. Set to false in production.
                                </div> -->
                            </div>
                        </div>
                        <!-- <div class="row">
                            <div class="col-sm-4">
                                <label for="headertopass" class="form-label">Headers to pass &nbsp; <i
                                        class="bi bi-info-circle" [matTooltip]=headertopassToolTip></i></label>
                                <div class="input-group mb-3">
                                    <input type="text" id="headertopass" class="form-control" placeholder="my-indexing"
                                        aria-label="Recipient's username" aria-describedby="button-addon2"
                                        formControlName="headersToPass">
                                    <button class="btn btn-outline-secondary" type="button" id="button-addon2"
                                        (click)="addParameter('headersToPass')">Add</button>
                                </div>
                                <div class="mt-3 d-flex">
                                    <button *ngFor="let attr of headersToPassArray; let i = index"
                                        class="parameter-item">
                                        {{ attr }}<mat-icon (click)="removeParameter(i,'headersToPass')"
                                            class="d-flex align-items-center justify-content-end">close</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div> -->
                        <div class="row gap-3 mb-3 p-2">
                            <div class="input-con d-flex gap-2 flex-column">
                                <div class="row align-items-end">
                                    <div class="col-sm-4">
                                        <label for="headertopass" class="form-label">Headers to pass &nbsp; <i
                                                class="bi bi-info-circle" [matTooltip]=headertopassToolTip></i></label>
                                        <input type="text" class="form-control" id="corsAllowedOrigins"
                                            placeholder="https://example.com" formControlName="headersToPass">
                                    </div>
                                    <div class="col-sm-2">
                                        <button class="btn btn-primary"
                                            style="border-radius: 50%; height: 40px; width: 40px;" type="submit"
                                            (click)="addParameter('headersToPass')"><svg
                                                xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                                                <path fill-rule="evenodd"
                                                    d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2" />
                                            </svg></button>
                                    </div>
                                    <div class="col-sm-12 d-flex mt-3">
                                        <button *ngFor="let attr of headersToPassArray; let i = index"
                                            class="parameter-item">
                                            {{ attr }}<mat-icon (click)="removeParameter(i,'headersToPass')"
                                                class="d-flex align-items-center justify-content-end">close</mat-icon>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        }
                    </mat-expansion-panel>

                </mat-accordion>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-sm-12">
                <button mat-raised-button (click)="emitValue()">Save</button>
            </div>
        </div>
    </form>
</div>